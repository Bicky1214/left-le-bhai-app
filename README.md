# Left-Turn-Only Route Planner

This web application generates a driving route between two points that consists only of left turns or, when a left turn is not available, straight paths. It's a proof-of-concept demonstrating how to enforce custom routing rules by combining data from OpenStreetMap (OSM) with the visualization capabilities of the Google Maps API.

## How It Works: The Core Logic

The standard Google Maps Directions API cannot handle custom constraints like "no right turns." To solve this, the application performs the routing itself on a backend server and only uses Google Maps on the frontend for displaying the final result.

1.  **Data Fetching (Backend):** When you request a route, the backend server queries the **Overpass API**, a service for fetching data from the main OpenStreetMap database. It requests all road data (`highway` ways and their corresponding `nodes`) within a geographic bounding box that contains your start and end points.

2.  **Graph Construction (Backend):** The server parses this OSM data and builds a directed graph in memory.
    * **Nodes**: Each intersection or point along a road (`node` in OSM terms) becomes a vertex in the graph.
    * **Edges**: Each road segment connecting two nodes (`way` in OSM terms) becomes a directed edge. The direction respects one-way streets (`oneway=yes` tags).

3.  **Custom A* Pathfinding (Backend):** This is the heart of the application. A standard A* algorithm finds the shortest path. We use a modified version:
    * **State:** The state in our A* search isn't just the current intersection, but the `(current, previous)` pair. This is crucial because you can't know if you're turning left without knowing where you came from.
    * **Turn Calculation**: At each intersection (`current`), the algorithm examines all possible next intersections (`neighbor`). For each potential move from `previous` -> `current` -> `neighbor`, it calculates the turn angle.
    * **Turn Prioritization**:
        * **Left Turns**: Angles between roughly -30° and -150° are identified as valid left turns.
        * **Straight Paths**: Angles close to 0° are considered straight.
        * **Exclusions**: Right turns and U-turns are completely ignored and are never added to the search path.
    * **Decision Making**: The algorithm is designed to be "greedy" for left turns. If one or more left turns are available at an intersection, it will **only** explore those. It will only consider going straight if there are absolutely no valid left turns available from that intersection. This ensures the "left-turn-only" rule is strictly followed.

4.  **Route Display (Frontend):** Once the backend finds a valid path, it sends the sequence of coordinates back to the frontend. The JavaScript on the web page then uses the Google Maps API to draw this sequence as a blue `Polyline` on the map, adding markers for the start and end points. A disclaimer is added to comply with Google's terms, clarifying that the route was not generated by Google.

## Setup Instructions

You need to run two components: the frontend (a static HTML file) and the backend (a Node.js server).

### Prerequisites

* **Node.js and npm**: [Install Node.js](https://nodejs.org/) (npm is included).
* **Google Maps API Key**: You need a valid API key from the [Google Cloud Console](https://cloud.google.com/maps-platform/). Make sure the **Maps JavaScript API** and **Places API** are enabled for your project.

### Step 1: Backend Setup

1.  **Create a Project Folder:**
    ```bash
    mkdir left-turn-router
    cd left-turn-router
    ```

2.  **Save the Backend Code:** Save the `server.js` code from the immersive document into a file named `server.js` inside this folder.

3.  **Initialize Node.js Project & Install Dependencies:**
    ```bash
    npm init -y
    npm install express cors axios
    ```

4.  **Run the Server:**
    ```bash
    node server.js
    ```
    The server should now be running at `http://localhost:3000`. Keep this terminal window open.

### Step 2: Frontend Setup

1.  **Save the Frontend Code:** In the same `left-turn-router` folder, save the `index.html` code from the immersive document into a file named `index.html`.

2.  **Add Your API Key:** Open `index.html` in a text editor. Find this line:
    ```javascript
    const GOOGLE_MAPS_API_KEY = 'YOUR_GOOGLE_MAPS_API_KEY';
    ```
    Replace `'YOUR_GOOGLE_MAPS_API_KEY'` with your actual Google Maps API key.

3.  **Open the Application:** Open the `index.html` file in your web browser (you can usually just double-click it).

You can now use the application to generate your first left-turn-only route!
